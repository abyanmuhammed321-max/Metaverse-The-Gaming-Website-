<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Metaverse Login</title>
<script src="https://accounts.google.com/gsi/client" async defer></script>

<style>
body{
    margin:0;
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    font-family:'Segoe UI', sans-serif;
    background: linear-gradient(-45deg, #0f0c29, #1a1a40, #000428, #004e92);
    background-size:400% 400%;
    animation:gradientBG 15s ease infinite;
    color:white;
}
@keyframes gradientBG{
    0%{background-position:0% 50%;}
    50%{background-position:100% 50%;}
    100%{background-position:0% 50%;}
}

.login-box{
    width:350px;
    padding:40px;
    border-radius:20px;
    background:rgba(255,255,255,0.05);
    backdrop-filter:blur(20px);
    border:1px solid rgba(255,255,255,0.1);
    text-align:center;
}
.profile{
    margin-top:20px;
    display:none;
}
.profile img{
    width:70px;
    border-radius:50%;
    box-shadow:0 0 20px #00f7ff;
}
</style>
</head>
<body>

<div class="login-box">
<h2>Sign In with Google</h2>

<div id="g_id_onload"
     data-client_id="247484871783-22fmk2v6j10coe1fglqv20q4cvmqsc8a.apps.googleusercontent.com"
     data-callback="handleCredentialResponse">
</div>

<div class="g_id_signin"
     data-type="standard"
     data-size="large"
     data-theme="outline"
     data-text="sign_in_with"
     data-shape="pill">
</div>

<div class="profile" id="profile">
    <h3 id="name"></h3>
    <img id="picture">
</div>
</div>

<script>
function handleCredentialResponse(response){
    const user = parseJwt(response.credential);

    localStorage.setItem("googleUser", JSON.stringify(user));

    document.getElementById("profile").style.display="block";
    document.getElementById("name").innerText = user.name;
    document.getElementById("picture").src = user.picture;

    setTimeout(()=>{
        window.location.href="index.html";
    },1200);
}

function parseJwt(token){
    var base64Url = token.split('.')[1];
    var base64 = base64Url.replace(/-/g,'+').replace(/_/g,'/');
    var jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c){
        return '%' + ('00'+c.charCodeAt(0).toString(16)).slice(-2);
    }).join(''));
    return JSON.parse(jsonPayload);
}
    localStorage.setItem("googleUser", JSON.stringify(user));
window.location.href = "index.html";
    

</script>

</body>
</html>



